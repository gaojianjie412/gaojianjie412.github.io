<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="第7章 文本数据In [1]: 12import pandas as pdimport numpy as np  一、string类型的性质1. string与object的区别string类型和object不同之处有三：① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型② 某些">
<meta name="keywords" content="Pandas">
<meta property="og:type" content="article">
<meta property="og:title" content="07_文本数据">
<meta property="og:url" content="https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/index.html">
<meta property="og:site_name" content="Robby">
<meta property="og:description" content="第7章 文本数据In [1]: 12import pandas as pdimport numpy as np  一、string类型的性质1. string与object的区别string类型和object不同之处有三：① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型② 某些">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-06-26T18:34:02.376Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="07_文本数据">
<meta name="twitter:description" content="第7章 文本数据In [1]: 12import pandas as pdimport numpy as np  一、string类型的性质1. string与object的区别string类型和object不同之处有三：① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型② 某些">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>07_文本数据</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2020/06/23/06-缺失数据/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&text=07_文本数据"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&is_video=false&description=07_文本数据"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=07_文本数据&body=Check out this article: https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&name=07_文本数据&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第7章-文本数据"><span class="toc-number">1.</span> <span class="toc-text">第7章 文本数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、string类型的性质"><span class="toc-number">1.1.</span> <span class="toc-text">一、string类型的性质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-string与object的区别"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. string与object的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#string类型和object不同之处有三："><span class="toc-number">1.1.1.1.</span> <span class="toc-text">string类型和object不同之处有三：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#①-字符存取方法（string-accessor-methods，如str-count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#②-某些Series方法不能在string上使用，例如：-Series-str-decode-，因为存储的是字符串而不是字节"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">② 某些Series方法不能在string上使用，例如： Series.str.decode()，因为存储的是字符串而不是字节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#③-string类型在缺失值存储或运算时，类型会广播为pd-NA，而不是浮点型np-nan"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">③ string类型在缺失值存储或运算时，类型会广播为pd.NA，而不是浮点型np.nan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-string类型的转换"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. string类型的转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#如果将一个其他类型的容器直接转换string类型可能会出错："><span class="toc-number">1.1.2.1.</span> <span class="toc-text">如果将一个其他类型的容器直接转换string类型可能会出错：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#当下正确的方法是分两部转换，先转为str型object，在转为string类型："><span class="toc-number">1.1.2.2.</span> <span class="toc-text">当下正确的方法是分两部转换，先转为str型object，在转为string类型：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、拆分与拼接"><span class="toc-number">1.2.</span> <span class="toc-text">二、拆分与拼接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-split方法"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. str.split方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）分割符与str的位置元素选取"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">（a）分割符与str的位置元素选取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#根据某一个元素分割，默认为空格"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">根据某一个元素分割，默认为空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str-i-表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str[i]表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）其他参数"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">（b）其他参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#expand参数控制了是否将列拆开，n参数代表最多分割多少次"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">expand参数控制了是否将列拆开，n参数代表最多分割多少次</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-str-cat方法"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. str.cat方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）不同对象的拼接模式"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">（a）不同对象的拼接模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#①-对于单个Series而言，就是指所有的元素进行字符合并为一个字符串"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">① 对于单个Series而言，就是指所有的元素进行字符合并为一个字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其中可选sep分隔符参数，和缺失值替代字符na-rep参数"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">其中可选sep分隔符参数，和缺失值替代字符na_rep参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#②-对于两个Series合并而言，是对应索引的元素进行合并"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">② 对于两个Series合并而言，是对应索引的元素进行合并</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#同样也有相应参数，需要注意的是两个缺失值会被同时替换"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">同样也有相应参数，需要注意的是两个缺失值会被同时替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#③-多列拼接可以分为表的拼接和多Series拼接"><span class="toc-number">1.2.2.7.</span> <span class="toc-text">③ 多列拼接可以分为表的拼接和多Series拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表的拼接"><span class="toc-number">1.2.2.8.</span> <span class="toc-text">表的拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多个Series拼接"><span class="toc-number">1.2.2.9.</span> <span class="toc-text">多个Series拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）cat中的索引对齐"><span class="toc-number">1.2.2.10.</span> <span class="toc-text">（b）cat中的索引对齐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join-’left’"><span class="toc-number">1.2.2.11.</span> <span class="toc-text">当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join=’left’</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、替换"><span class="toc-number">1.3.</span> <span class="toc-text">三、替换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#广义上的替换，就是指str-replace函数的应用，fillna是针对缺失值的替换，上一章已经提及"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">广义上的替换，就是指str.replace函数的应用，fillna是针对缺失值的替换，上一章已经提及</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-replace的常见用法"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. str.replace的常见用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一个值写r开头的正则表达式，后一个写替换的字符串"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">第一个值写r开头的正则表达式，后一个写替换的字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-子组与函数替换"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 子组与函数替换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过正整数调用子组（0返回字符本身，从1开始才是子组）"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">通过正整数调用子组（0返回字符本身，从1开始才是子组）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#利用-P-lt-…-gt-表达式可以对子组命名调用"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">利用?P&lt;….&gt;表达式可以对子组命名调用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-关于str-replace的注意事项"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 关于str.replace的注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#首先，要明确str-replace和replace并不是一个东西："><span class="toc-number">1.3.3.1.</span> <span class="toc-text">首先，要明确str.replace和replace并不是一个东西：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">str.replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex-True，该方法通过字典可支持多列替换"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex=True，该方法通过字典可支持多列替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）str-replace赋值参数不得为pd-NA"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">（a）str.replace赋值参数不得为pd.NA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#此时，可以先转为object类型再转换回来，曲线救国："><span class="toc-number">1.3.3.7.</span> <span class="toc-text">此时，可以先转为object类型再转换回来，曲线救国：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条"><span class="toc-number">1.3.3.8.</span> <span class="toc-text">至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换"><span class="toc-number">1.3.3.9.</span> <span class="toc-text">（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#该bug现在还未修复"><span class="toc-number">1.3.3.10.</span> <span class="toc-text">该bug现在还未修复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）string类型序列如果存在缺失值，不能使用replace替换"><span class="toc-number">1.3.3.11.</span> <span class="toc-text">（c）string类型序列如果存在缺失值，不能使用replace替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str-replace方法"><span class="toc-number">1.3.3.12.</span> <span class="toc-text">综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str.replace方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、子串匹配与提取"><span class="toc-number">1.4.</span> <span class="toc-text">四、子串匹配与提取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-extract方法"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. str.extract方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）常见用法"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">（a）常见用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用子组名作为列名"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">使用子组名作为列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#利用-正则标记选择部分提取"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">利用?正则标记选择部分提取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）expand参数（默认为True）"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">（b）expand参数（默认为True）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame"><span class="toc-number">1.4.1.5.</span> <span class="toc-text">对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错"><span class="toc-number">1.4.1.6.</span> <span class="toc-text">对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-str-extractall方法"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. str.extractall方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如果想查看第i层匹配，可使用xs方法"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">如果想查看第i层匹配，可使用xs方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-str-contains和str-match"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. str.contains和str.match</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#前者的作用为检测是否包含某种正则模式"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">前者的作用为检测是否包含某种正则模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可选参数为na"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">可选参数为na</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-match与其区别在于，match依赖于python的re-match，检测内容为是否从头开始包含该正则模式"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">str.match与其区别在于，match依赖于python的re.match，检测内容为是否从头开始包含该正则模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、常用字符串方法"><span class="toc-number">1.5.</span> <span class="toc-text">五、常用字符串方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-过滤型方法"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 过滤型方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）str-strip"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">（a）str.strip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用于过滤空格"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">常用于过滤空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）str-lower和str-upper"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">（b）str.lower和str.upper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）str-swapcase和str-capitalize"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">（c）str.swapcase和str.capitalize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分别表示交换字母大小写和大写首字母"><span class="toc-number">1.5.1.5.</span> <span class="toc-text">分别表示交换字母大小写和大写首字母</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-isnumeric方法"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. isnumeric方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#检查每一位是否都是数字，请问如何判断是否是数值？（问题二）"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">检查每一位是否都是数字，请问如何判断是否是数值？（问题二）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、问题与练习"><span class="toc-number">1.6.</span> <span class="toc-text">六、问题与练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-问题"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题一】-str对象方法和df-Series对象方法有什么区别？"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">【问题一】 str对象方法和df/Series对象方法有什么区别？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题二】-给出一列string类型，如何判断单元格是否是数值型数据？"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">【问题二】 给出一列string类型，如何判断单元格是否是数值型数据？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题三】-rsplit方法的作用是什么？它在什么场合下适用？"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">【问题三】 rsplit方法的作用是什么？它在什么场合下适用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题四】-在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">【问题四】 在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-练习"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#【练习一】-现有一份关于字符串的数据集，请解决以下问题："><span class="toc-number">1.6.2.1.</span> <span class="toc-text">【练习一】 现有一份关于字符串的数据集，请解决以下问题：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【练习二】-现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题："><span class="toc-number">1.6.2.5.</span> <span class="toc-text">【练习二】 现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）选出所有关于北京市和上海市新闻标题的所在行。"><span class="toc-number">1.6.2.6.</span> <span class="toc-text">（a）选出所有关于北京市和上海市新闻标题的所在行。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）求col2的均值。"><span class="toc-number">1.6.2.7.</span> <span class="toc-text">（b）求col2的均值。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）求col3的均值。"><span class="toc-number">1.6.2.8.</span> <span class="toc-text">（c）求col3的均值。</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        07_文本数据
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Robby</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-06-26T18:31:47.000Z" itemprop="datePublished">2020-06-27</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Pandas/">Pandas</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="第7章-文本数据"><a href="#第7章-文本数据" class="headerlink" title="第7章 文本数据"></a>第7章 文本数据</h1><p>In [1]:</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>

<h2 id="一、string类型的性质"><a href="#一、string类型的性质" class="headerlink" title="一、string类型的性质"></a>一、string类型的性质</h2><h3 id="1-string与object的区别"><a href="#1-string与object的区别" class="headerlink" title="1. string与object的区别"></a>1. string与object的区别</h3><h4 id="string类型和object不同之处有三："><a href="#string类型和object不同之处有三：" class="headerlink" title="string类型和object不同之处有三："></a>string类型和object不同之处有三：</h4><h4 id="①-字符存取方法（string-accessor-methods，如str-count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型"><a href="#①-字符存取方法（string-accessor-methods，如str-count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型" class="headerlink" title="① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型"></a>① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型</h4><h4 id="②-某些Series方法不能在string上使用，例如：-Series-str-decode-，因为存储的是字符串而不是字节"><a href="#②-某些Series方法不能在string上使用，例如：-Series-str-decode-，因为存储的是字符串而不是字节" class="headerlink" title="② 某些Series方法不能在string上使用，例如： Series.str.decode()，因为存储的是字符串而不是字节"></a>② 某些Series方法不能在string上使用，例如： Series.str.decode()，因为存储的是字符串而不是字节</h4><h4 id="③-string类型在缺失值存储或运算时，类型会广播为pd-NA，而不是浮点型np-nan"><a href="#③-string类型在缺失值存储或运算时，类型会广播为pd-NA，而不是浮点型np-nan" class="headerlink" title="③ string类型在缺失值存储或运算时，类型会广播为pd.NA，而不是浮点型np.nan"></a>③ string类型在缺失值存储或运算时，类型会广播为pd.NA，而不是浮点型np.nan</h4><h4 id="其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串"><a href="#其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串" class="headerlink" title="其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串"></a>其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串</h4><h3 id="2-string类型的转换"><a href="#2-string类型的转换" class="headerlink" title="2. string类型的转换"></a>2. string类型的转换</h3><h4 id="如果将一个其他类型的容器直接转换string类型可能会出错："><a href="#如果将一个其他类型的容器直接转换string类型可能会出错：" class="headerlink" title="如果将一个其他类型的容器直接转换string类型可能会出错："></a>如果将一个其他类型的容器直接转换string类型可能会出错：</h4><p>In [2]:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pd</span><span class="selector-class">.Series</span>([<span class="number">1</span>,<span class="string">'1.'</span>])<span class="selector-class">.astype</span>(<span class="string">'string'</span>) #报错</span><br><span class="line"><span class="selector-id">#pd</span><span class="selector-class">.Series</span>([<span class="number">1</span>,<span class="number">2</span>])<span class="selector-class">.astype</span>(<span class="string">'string'</span>) #报错</span><br><span class="line"><span class="selector-id">#pd</span><span class="selector-class">.Series</span>([True,False])<span class="selector-class">.astype</span>(<span class="string">'string'</span>) #报错</span><br></pre></td></tr></table></figure>

<h4 id="当下正确的方法是分两部转换，先转为str型object，在转为string类型："><a href="#当下正确的方法是分两部转换，先转为str型object，在转为string类型：" class="headerlink" title="当下正确的方法是分两部转换，先转为str型object，在转为string类型："></a>当下正确的方法是分两部转换，先转为str型object，在转为string类型：</h4><p>In [3]:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pd</span><span class="selector-class">.Series</span>([<span class="number">1</span>,<span class="string">'1.'</span>])<span class="selector-class">.astype</span>(<span class="string">'str'</span>)<span class="selector-class">.astype</span>(<span class="string">'string'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[3]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>     <span class="number">1</span></span><br><span class="line"><span class="number">1</span>    <span class="number">1.</span></span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<p>In [4]:</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">pd</span>.<span class="type">Series</span>([<span class="number">1</span>,<span class="number">2</span>]).<span class="keyword">as</span><span class="keyword">type</span>('str').astype('string')</span><br></pre></td></tr></table></figure>

<p>Out[4]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="number">1</span></span><br><span class="line"><span class="number">1</span>    <span class="number">2</span></span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<p>In [5]:</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">pd</span>.<span class="type">Series</span>([<span class="type">True</span>,<span class="type">False</span>]).<span class="keyword">as</span><span class="keyword">type</span>('str').astype('string')</span><br></pre></td></tr></table></figure>

<p>Out[5]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">string</span></span><br></pre></td></tr></table></figure>

<h2 id="二、拆分与拼接"><a href="#二、拆分与拼接" class="headerlink" title="二、拆分与拼接"></a>二、拆分与拼接</h2><h3 id="1-str-split方法"><a href="#1-str-split方法" class="headerlink" title="1. str.split方法"></a>1. str.split方法</h3><h4 id="（a）分割符与str的位置元素选取"><a href="#（a）分割符与str的位置元素选取" class="headerlink" title="（a）分割符与str的位置元素选取"></a>（a）分割符与str的位置元素选取</h4><p>In [6]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">'a_b_c'</span>, <span class="string">'c_d_e'</span>, np<span class="selector-class">.nan</span>, <span class="string">'f_g_h'</span>], dtype=<span class="string">"string"</span>)</span><br><span class="line">s</span><br></pre></td></tr></table></figure>

<p>Out[6]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    a_b_c</span><br><span class="line"><span class="number">1</span>    c_d_e</span><br><span class="line"><span class="number">2</span>     <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">3</span>    f_g_h</span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<h4 id="根据某一个元素分割，默认为空格"><a href="#根据某一个元素分割，默认为空格" class="headerlink" title="根据某一个元素分割，默认为空格"></a>根据某一个元素分割，默认为空格</h4><p>In [7]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.split</span>(<span class="string">'_'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[7]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    [<span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c]</span><br><span class="line"><span class="number">1</span>    [c, d, e]</span><br><span class="line"><span class="number">2</span>         &lt;NA&gt;</span><br><span class="line"><span class="number">3</span>    [f, g, h]</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>

<h4 id="这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串"><a href="#这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串" class="headerlink" title="这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串"></a>这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串</h4><h4 id="对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str-i-表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出"><a href="#对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str-i-表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出" class="headerlink" title="对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str[i]表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出"></a>对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str[i]表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出</h4><p>In [8]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.split</span>(<span class="string">'_'</span>)<span class="selector-class">.str</span>[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p>Out[8]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>       b</span><br><span class="line"><span class="number">1</span>       d</span><br><span class="line"><span class="number">2</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">3</span>       g</span><br><span class="line"><span class="symbol">dtype:</span> object</span><br></pre></td></tr></table></figure>

<p>In [9]:</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.<span class="symbol">Series</span>([<span class="string">'a_b_c'</span>, [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]], dtype=<span class="string">"object"</span>).str[<span class="number">1</span>]</span><br><span class="line">#第一个元素先转为[<span class="string">'a'</span>,<span class="string">'_'</span>,<span class="string">'b'</span>,<span class="string">'_'</span>,<span class="string">'c'</span>]</span><br></pre></td></tr></table></figure>

<p>Out[9]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    _</span><br><span class="line"><span class="number">1</span>    b</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>

<h4 id="（b）其他参数"><a href="#（b）其他参数" class="headerlink" title="（b）其他参数"></a>（b）其他参数</h4><h4 id="expand参数控制了是否将列拆开，n参数代表最多分割多少次"><a href="#expand参数控制了是否将列拆开，n参数代表最多分割多少次" class="headerlink" title="expand参数控制了是否将列拆开，n参数代表最多分割多少次"></a>expand参数控制了是否将列拆开，n参数代表最多分割多少次</h4><p>In [10]:</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="built_in">str</span>.<span class="built_in">split</span>(<span class="string">'_'</span>,<span class="built_in">expand</span>=True)</span><br></pre></td></tr></table></figure>

<p>Out[10]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
<th align="right">1</th>
<th align="right">2</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">a</td>
<td align="right">b</td>
<td align="right">c</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">c</td>
<td align="right">d</td>
<td align="right">e</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right"><na></na></td>
<td align="right"><na></na></td>
<td align="right"><na></na></td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">f</td>
<td align="right">g</td>
<td align="right">h</td>
</tr>
</tbody></table>
<p>In [11]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.split</span>(<span class="string">'_'</span>,n=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>Out[11]:</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="string">[a, b_c]</span></span><br><span class="line"><span class="number">1</span>    <span class="string">[c, d_e]</span></span><br><span class="line"><span class="number">2</span>        &lt;NA&gt;</span><br><span class="line"><span class="number">3</span>    <span class="string">[f, g_h]</span></span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>

<p>In [12]:</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="built_in">str</span>.<span class="built_in">split</span>(<span class="string">'_'</span>,<span class="built_in">expand</span>=True,n=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>Out[12]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
<th align="right">1</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">a</td>
<td align="right">b_c</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">c</td>
<td align="right">d_e</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right"><na></na></td>
<td align="right"><na></na></td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">f</td>
<td align="right">g_h</td>
</tr>
</tbody></table>
<h3 id="2-str-cat方法"><a href="#2-str-cat方法" class="headerlink" title="2. str.cat方法"></a>2. str.cat方法</h3><h4 id="（a）不同对象的拼接模式"><a href="#（a）不同对象的拼接模式" class="headerlink" title="（a）不同对象的拼接模式"></a>（a）不同对象的拼接模式</h4><h4 id="cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列"><a href="#cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列" class="headerlink" title="cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列"></a>cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列</h4><h4 id="①-对于单个Series而言，就是指所有的元素进行字符合并为一个字符串"><a href="#①-对于单个Series而言，就是指所有的元素进行字符合并为一个字符串" class="headerlink" title="① 对于单个Series而言，就是指所有的元素进行字符合并为一个字符串"></a>① 对于单个Series而言，就是指所有的元素进行字符合并为一个字符串</h4><p>In [13]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">'ab'</span>,<span class="literal">None</span>,<span class="string">'d'</span>],dtype=<span class="string">'string'</span>)</span><br><span class="line">s</span><br></pre></td></tr></table></figure>

<p>Out[13]:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>      <span class="keyword">ab</span></span><br><span class="line"><span class="number">1</span>    <span class="symbol">&lt;NA&gt;</span></span><br><span class="line"><span class="number">2</span>       d</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<p>In [14]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>()</span><br></pre></td></tr></table></figure>

<p>Out[14]:</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">'abd</span>'</span><br></pre></td></tr></table></figure>

<h4 id="其中可选sep分隔符参数，和缺失值替代字符na-rep参数"><a href="#其中可选sep分隔符参数，和缺失值替代字符na-rep参数" class="headerlink" title="其中可选sep分隔符参数，和缺失值替代字符na_rep参数"></a>其中可选sep分隔符参数，和缺失值替代字符na_rep参数</h4><p>In [15]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(sep=<span class="string">','</span>)</span><br></pre></td></tr></table></figure>

<p>Out[15]:</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">'ab</span>,d'</span><br></pre></td></tr></table></figure>

<p>In [16]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(sep=<span class="string">','</span>,na_rep=<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[16]:</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">'ab</span>,*,d'</span><br></pre></td></tr></table></figure>

<h4 id="②-对于两个Series合并而言，是对应索引的元素进行合并"><a href="#②-对于两个Series合并而言，是对应索引的元素进行合并" class="headerlink" title="② 对于两个Series合并而言，是对应索引的元素进行合并"></a>② 对于两个Series合并而言，是对应索引的元素进行合并</h4><p>In [17]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2 = pd.Series([<span class="string">'24'</span>,<span class="literal">None</span>,<span class="literal">None</span>],dtype=<span class="string">'string'</span>)</span><br><span class="line">s2</span><br></pre></td></tr></table></figure>

<p>Out[17]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>      <span class="number">24</span></span><br><span class="line"><span class="number">1</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">2</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<p>In [18]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(s2)</span><br></pre></td></tr></table></figure>

<p>Out[18]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    ab24</span><br><span class="line"><span class="number">1</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">2</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<h4 id="同样也有相应参数，需要注意的是两个缺失值会被同时替换"><a href="#同样也有相应参数，需要注意的是两个缺失值会被同时替换" class="headerlink" title="同样也有相应参数，需要注意的是两个缺失值会被同时替换"></a>同样也有相应参数，需要注意的是两个缺失值会被同时替换</h4><p>In [19]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(s2,sep=<span class="string">','</span>,na_rep=<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[19]:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="keyword">ab</span>,<span class="number">24</span></span><br><span class="line"><span class="number">1</span>      *,*</span><br><span class="line"><span class="number">2</span>      d,*</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="③-多列拼接可以分为表的拼接和多Series拼接"><a href="#③-多列拼接可以分为表的拼接和多Series拼接" class="headerlink" title="③ 多列拼接可以分为表的拼接和多Series拼接"></a>③ 多列拼接可以分为表的拼接和多Series拼接</h4><h4 id="表的拼接"><a href="#表的拼接" class="headerlink" title="表的拼接"></a>表的拼接</h4><p>In [20]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(pd.DataFrame(&#123;<span class="number">0</span>:[<span class="string">'1'</span>,<span class="string">'3'</span>,<span class="string">'5'</span>],<span class="number">1</span>:[<span class="string">'5'</span>,<span class="string">'b'</span>,None]&#125;,dtype=<span class="string">'string'</span>),na_rep=<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[20]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    ab15</span><br><span class="line"><span class="number">1</span>     *<span class="number">3</span>b</span><br><span class="line"><span class="number">2</span>     d5*</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="多个Series拼接"><a href="#多个Series拼接" class="headerlink" title="多个Series拼接"></a>多个Series拼接</h4><p>In [21]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>([s+<span class="string">'0'</span>,s*<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>Out[21]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    abab0abab</span><br><span class="line"><span class="number">1</span>         <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">2</span>        dd0dd</span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<h4 id="（b）cat中的索引对齐"><a href="#（b）cat中的索引对齐" class="headerlink" title="（b）cat中的索引对齐"></a>（b）cat中的索引对齐</h4><h4 id="当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join-’left’"><a href="#当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join-’left’" class="headerlink" title="当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join=’left’"></a>当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join=’left’</h4><p>In [22]:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s2 = pd.Series(<span class="type">list</span>('abc'),index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],dtype='<span class="type">string</span>')</span><br><span class="line">s2</span><br></pre></td></tr></table></figure>

<p>Out[22]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>    a</span><br><span class="line"><span class="number">2</span>    b</span><br><span class="line"><span class="number">3</span>    c</span><br><span class="line">dtype: string</span><br></pre></td></tr></table></figure>

<p>In [23]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.cat</span>(s2,na_rep=<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[23]:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    ab*</span><br><span class="line"><span class="number">1</span>     *<span class="keyword">a</span></span><br><span class="line"><span class="number">2</span>     db</span><br><span class="line">dtype: <span class="keyword">string</span></span><br></pre></td></tr></table></figure>

<h2 id="三、替换"><a href="#三、替换" class="headerlink" title="三、替换"></a>三、替换</h2><h4 id="广义上的替换，就是指str-replace函数的应用，fillna是针对缺失值的替换，上一章已经提及"><a href="#广义上的替换，就是指str-replace函数的应用，fillna是针对缺失值的替换，上一章已经提及" class="headerlink" title="广义上的替换，就是指str.replace函数的应用，fillna是针对缺失值的替换，上一章已经提及"></a>广义上的替换，就是指str.replace函数的应用，fillna是针对缺失值的替换，上一章已经提及</h4><h4 id="提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉"><a href="#提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉" class="headerlink" title="提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉"></a>提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过<a href="https://regexone.com/" target="_blank" rel="noopener">这份资料</a>来熟悉</h4><h3 id="1-str-replace的常见用法"><a href="#1-str-replace的常见用法" class="headerlink" title="1. str.replace的常见用法"></a>1. str.replace的常见用法</h3><p>In [24]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'Aaba'</span>, <span class="string">'Baca'</span>,<span class="string">''</span>, np<span class="selector-class">.nan</span>, <span class="string">'CABA'</span>, <span class="string">'dog'</span>, <span class="string">'cat'</span>],dtype=<span class="string">"string"</span>)</span><br><span class="line">s</span><br></pre></td></tr></table></figure>

<p>Out[24]:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>       A</span><br><span class="line"><span class="number">1</span>       B</span><br><span class="line"><span class="number">2</span>       C</span><br><span class="line"><span class="number">3</span>    Aaba</span><br><span class="line"><span class="number">4</span>    Baca</span><br><span class="line"><span class="number">5</span>        </span><br><span class="line"><span class="number">6</span>    <span class="symbol">&lt;NA&gt;</span></span><br><span class="line"><span class="number">7</span>    CABA</span><br><span class="line"><span class="number">8</span>     dog</span><br><span class="line"><span class="number">9</span>     <span class="keyword">cat</span></span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="第一个值写r开头的正则表达式，后一个写替换的字符串"><a href="#第一个值写r开头的正则表达式，后一个写替换的字符串" class="headerlink" title="第一个值写r开头的正则表达式，后一个写替换的字符串"></a>第一个值写r开头的正则表达式，后一个写替换的字符串</h4><p>In [25]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.str.replace(<span class="string">r'^[AB]'</span>,<span class="string">'***'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[25]:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0       <span class="emphasis">***</span></span><br><span class="line">1       <span class="emphasis">***</span></span><br><span class="line">2         C</span><br><span class="line">3    <span class="emphasis">***</span>aba</span><br><span class="line">4    <span class="emphasis">***</span>aca</span><br><span class="line">5          </span><br><span class="line">6      <span class="xml"><span class="tag">&lt;<span class="name">NA</span>&gt;</span></span></span><br><span class="line">7      CABA</span><br><span class="line">8       dog</span><br><span class="line">9       cat</span><br><span class="line">dtype: string</span><br></pre></td></tr></table></figure>

<h3 id="2-子组与函数替换"><a href="#2-子组与函数替换" class="headerlink" title="2. 子组与函数替换"></a>2. 子组与函数替换</h3><h4 id="通过正整数调用子组（0返回字符本身，从1开始才是子组）"><a href="#通过正整数调用子组（0返回字符本身，从1开始才是子组）" class="headerlink" title="通过正整数调用子组（0返回字符本身，从1开始才是子组）"></a>通过正整数调用子组（0返回字符本身，从1开始才是子组）</h4><p>In [26]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.str.replace(<span class="string">r'([ABC])(\w+)'</span>,<span class="keyword">lambda</span> x:x.group(<span class="number">2</span>)[<span class="number">1</span>:]+<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[26]:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>       A</span><br><span class="line"><span class="number">1</span>       B</span><br><span class="line"><span class="number">2</span>       C</span><br><span class="line"><span class="number">3</span>     <span class="keyword">ba</span>*</span><br><span class="line"><span class="number">4</span>     <span class="keyword">ca</span>*</span><br><span class="line"><span class="number">5</span>        </span><br><span class="line"><span class="number">6</span>    <span class="symbol">&lt;NA&gt;</span></span><br><span class="line"><span class="number">7</span>     BA*</span><br><span class="line"><span class="number">8</span>     dog</span><br><span class="line"><span class="number">9</span>     <span class="keyword">cat</span></span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="利用-P-lt-…-gt-表达式可以对子组命名调用"><a href="#利用-P-lt-…-gt-表达式可以对子组命名调用" class="headerlink" title="利用?P&lt;….&gt;表达式可以对子组命名调用"></a>利用?P&lt;….&gt;表达式可以对子组命名调用</h4><p>In [27]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.str.replace(<span class="string">r'(?P&lt;one&gt;[ABC])(?P&lt;two&gt;\w+)'</span>,<span class="keyword">lambda</span> x:x.group(<span class="string">'two'</span>)[<span class="number">1</span>:]+<span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[27]:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>       A</span><br><span class="line"><span class="number">1</span>       B</span><br><span class="line"><span class="number">2</span>       C</span><br><span class="line"><span class="number">3</span>     <span class="keyword">ba</span>*</span><br><span class="line"><span class="number">4</span>     <span class="keyword">ca</span>*</span><br><span class="line"><span class="number">5</span>        </span><br><span class="line"><span class="number">6</span>    <span class="symbol">&lt;NA&gt;</span></span><br><span class="line"><span class="number">7</span>     BA*</span><br><span class="line"><span class="number">8</span>     dog</span><br><span class="line"><span class="number">9</span>     <span class="keyword">cat</span></span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h3 id="3-关于str-replace的注意事项"><a href="#3-关于str-replace的注意事项" class="headerlink" title="3. 关于str.replace的注意事项"></a>3. 关于str.replace的注意事项</h3><h4 id="首先，要明确str-replace和replace并不是一个东西："><a href="#首先，要明确str-replace和replace并不是一个东西：" class="headerlink" title="首先，要明确str.replace和replace并不是一个东西："></a>首先，要明确str.replace和replace并不是一个东西：</h4><h4 id="str-replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用"><a href="#str-replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用" class="headerlink" title="str.replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用"></a>str.replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用</h4><h4 id="replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex-True，该方法通过字典可支持多列替换"><a href="#replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex-True，该方法通过字典可支持多列替换" class="headerlink" title="replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex=True，该方法通过字典可支持多列替换"></a>replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex=True，该方法通过字典可支持多列替换</h4><h4 id="但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复"><a href="#但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复" class="headerlink" title="但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复"></a>但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复</h4><h4 id="（a）str-replace赋值参数不得为pd-NA"><a href="#（a）str-replace赋值参数不得为pd-NA" class="headerlink" title="（a）str.replace赋值参数不得为pd.NA"></a>（a）str.replace赋值参数不得为pd.NA</h4><h4 id="这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错"><a href="#这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错" class="headerlink" title="这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错"></a>这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错</h4><p>In [28]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pd</span>.Series([<span class="string">'A'</span>,<span class="string">'B'</span>],dtype=<span class="string">'string'</span>)<span class="selector-class">.str</span><span class="selector-class">.replace</span>(r<span class="string">'[A]'</span>,pd.NA) #报错</span><br><span class="line"><span class="selector-id">#pd</span>.Series([<span class="string">'A'</span>,<span class="string">'B'</span>],dtype=<span class="string">'O'</span>)<span class="selector-class">.str</span><span class="selector-class">.replace</span>(r<span class="string">'[A]'</span>,pd.NA) #报错</span><br></pre></td></tr></table></figure>

<h4 id="此时，可以先转为object类型再转换回来，曲线救国："><a href="#此时，可以先转为object类型再转换回来，曲线救国：" class="headerlink" title="此时，可以先转为object类型再转换回来，曲线救国："></a>此时，可以先转为object类型再转换回来，曲线救国：</h4><p>In [29]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'A'</span>,<span class="string">'B'</span>],dtype=<span class="string">'string'</span>).astype(<span class="string">'O'</span>).replace(<span class="string">r'[A]'</span>,pd.NA,regex=<span class="literal">True</span>).astype(<span class="string">'string'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[29]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="number">1</span>       B</span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<h4 id="至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条"><a href="#至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条" class="headerlink" title="至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条"></a>至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条</h4><h4 id="（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换"><a href="#（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换" class="headerlink" title="（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换"></a>（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换</h4><h4 id="该bug现在还未修复"><a href="#该bug现在还未修复" class="headerlink" title="该bug现在还未修复"></a>该bug现在还未修复</h4><p>In [30]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'A'</span>,<span class="string">'B'</span>],dtype=<span class="string">'string'</span>).replace(<span class="string">r'[A]'</span>,<span class="string">'C'</span>,regex=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>Out[30]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    A</span><br><span class="line"><span class="number">1</span>    B</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<p>In [31]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'A'</span>,<span class="string">'B'</span>],dtype=<span class="string">'O'</span>).replace(<span class="string">r'[A]'</span>,<span class="string">'C'</span>,regex=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>Out[31]:</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    C</span><br><span class="line"><span class="number">1</span>    <span class="keyword">B</span></span><br><span class="line"><span class="keyword">dtype: </span>object</span><br></pre></td></tr></table></figure>

<h4 id="（c）string类型序列如果存在缺失值，不能使用replace替换"><a href="#（c）string类型序列如果存在缺失值，不能使用replace替换" class="headerlink" title="（c）string类型序列如果存在缺失值，不能使用replace替换"></a>（c）string类型序列如果存在缺失值，不能使用replace替换</h4><p>In [32]:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pd</span><span class="selector-class">.Series</span>([<span class="string">'A'</span>,np.nan],dtype=<span class="string">'string'</span>)<span class="selector-class">.replace</span>(<span class="string">'A'</span>,<span class="string">'B'</span>) #报错</span><br></pre></td></tr></table></figure>

<p>In [33]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'A'</span>,np.nan],dtype=<span class="string">'string'</span>)<span class="selector-class">.str</span><span class="selector-class">.replace</span>(<span class="string">'A'</span>,<span class="string">'B'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[33]:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>       B</span><br><span class="line"><span class="number">1</span>    <span class="params">&lt;NA&gt;</span></span><br><span class="line"><span class="symbol">dtype:</span> string</span><br></pre></td></tr></table></figure>

<h4 id="综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str-replace方法"><a href="#综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str-replace方法" class="headerlink" title="综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str.replace方法"></a>综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str.replace方法</h4><h2 id="四、子串匹配与提取"><a href="#四、子串匹配与提取" class="headerlink" title="四、子串匹配与提取"></a>四、子串匹配与提取</h2><h3 id="1-str-extract方法"><a href="#1-str-extract方法" class="headerlink" title="1. str.extract方法"></a>1. str.extract方法</h3><h4 id="（a）常见用法"><a href="#（a）常见用法" class="headerlink" title="（a）常见用法"></a>（a）常见用法</h4><p>In [34]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'10-87'</span>, <span class="string">'10-88'</span>, <span class="string">'10-89'</span>],dtype=<span class="string">"string"</span>).str.extract(<span class="string">r'([\d]&#123;2&#125;)-([\d]&#123;2&#125;)'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[34]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
<th align="right">1</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">87</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">88</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">10</td>
<td align="right">89</td>
</tr>
</tbody></table>
<h4 id="使用子组名作为列名"><a href="#使用子组名作为列名" class="headerlink" title="使用子组名作为列名"></a>使用子组名作为列名</h4><p>In [35]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'10-87'</span>, <span class="string">'10-88'</span>, <span class="string">'-89'</span>],dtype=<span class="string">"string"</span>).str.extract(<span class="string">r'(?P&lt;name_1&gt;[\d]&#123;2&#125;)-(?P&lt;name_2&gt;[\d]&#123;2&#125;)'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[35]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">name_1</th>
<th align="right">name_2</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">87</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">88</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right"><na></na></td>
<td align="right"><na></na></td>
</tr>
</tbody></table>
<h4 id="利用-正则标记选择部分提取"><a href="#利用-正则标记选择部分提取" class="headerlink" title="利用?正则标记选择部分提取"></a>利用?正则标记选择部分提取</h4><p>In [36]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'10-87'</span>, <span class="string">'10-88'</span>, <span class="string">'-89'</span>],dtype=<span class="string">"string"</span>).str.extract(<span class="string">r'(?P&lt;name_1&gt;[\d]&#123;2&#125;)?-(?P&lt;name_2&gt;[\d]&#123;2&#125;)'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[36]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">name_1</th>
<th align="right">name_2</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">87</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">88</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right"><na></na></td>
<td align="right">89</td>
</tr>
</tbody></table>
<p>In [37]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'10-87'</span>, <span class="string">'10-88'</span>, <span class="string">'10-'</span>],dtype=<span class="string">"string"</span>).str.extract(<span class="string">r'(?P&lt;name_1&gt;[\d]&#123;2&#125;)-(?P&lt;name_2&gt;[\d]&#123;2&#125;)?'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[37]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">name_1</th>
<th align="right">name_2</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">87</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">10</td>
<td align="right">88</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">10</td>
<td align="right"><na></na></td>
</tr>
</tbody></table>
<h4 id="（b）expand参数（默认为True）"><a href="#（b）expand参数（默认为True）" class="headerlink" title="（b）expand参数（默认为True）"></a>（b）expand参数（默认为True）</h4><h4 id="对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame"><a href="#对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame" class="headerlink" title="对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame"></a>对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame</h4><h4 id="对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错"><a href="#对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错" class="headerlink" title="对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错"></a>对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错</h4><p>In [38]:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">"a1"</span>, <span class="string">"b2"</span>, <span class="string">"c3"</span>], [<span class="string">"A11"</span>, <span class="string">"B22"</span>, <span class="string">"C33"</span>], dtype=<span class="string">"string"</span>)</span><br><span class="line">s.index</span><br></pre></td></tr></table></figure>

<p>Out[38]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Index</span><span class="params">([<span class="string">'A11'</span>, <span class="string">'B22'</span>, <span class="string">'C33'</span>], dtype=<span class="string">'object'</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>In [39]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.str.extract(<span class="string">r'([\w])'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[39]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
</tr>
</thead>
<tbody><tr>
<td align="right">A11</td>
<td align="right">a</td>
</tr>
<tr>
<td align="right">B22</td>
<td align="right">b</td>
</tr>
<tr>
<td align="right">C33</td>
<td align="right">c</td>
</tr>
</tbody></table>
<p>In [40]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.str.extract(<span class="string">r'([\w])'</span>,expand=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>Out[40]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A11    a</span><br><span class="line">B22    b</span><br><span class="line">C33    c</span><br><span class="line">dtype: string</span><br></pre></td></tr></table></figure>

<p>In [41]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.index.str.extract(<span class="string">r'([\w])'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[41]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">A</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">B</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">C</td>
</tr>
</tbody></table>
<p>In [42]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.index.str.extract(<span class="string">r'([\w])'</span>,expand=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>Out[42]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Index</span><span class="params">([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>], dtype=<span class="string">'object'</span>)</span></span></span><br></pre></td></tr></table></figure>

<p>In [43]:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.index.str.extract(<span class="string">r'([\w])([\d])'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[43]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">0</th>
<th align="right">1</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">A</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">B</td>
<td align="right">2</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">C</td>
<td align="right">3</td>
</tr>
</tbody></table>
<p>In [44]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#s</span><span class="selector-class">.index</span><span class="selector-class">.str</span><span class="selector-class">.extract</span>(r<span class="string">'([\w])([\d])'</span>,expand=False) #报错</span><br></pre></td></tr></table></figure>

<h3 id="2-str-extractall方法"><a href="#2-str-extractall方法" class="headerlink" title="2. str.extractall方法"></a>2. str.extractall方法</h3><h4 id="与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）"><a href="#与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）" class="headerlink" title="与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）"></a>与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）</h4><p>In [45]:</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">"a1a2"</span>, <span class="string">"b1"</span>, <span class="string">"c1"</span>], index=[<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>],dtype=<span class="string">"string"</span>)</span><br><span class="line">two_groups = <span class="comment">'(?P<span class="doctag">&lt;letter&gt;</span>[a-z])(?P<span class="doctag">&lt;digit&gt;</span>[0-9])'</span></span><br><span class="line">s.str.extract(two_groups, expand=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>Out[45]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">letter</th>
<th align="right">digit</th>
</tr>
</thead>
<tbody><tr>
<td align="right">A</td>
<td align="right">a</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">B</td>
<td align="right">b</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">C</td>
<td align="right">c</td>
<td align="right">1</td>
</tr>
</tbody></table>
<p>In [46]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.extractall</span>(two_groups)</span><br></pre></td></tr></table></figure>

<p>Out[46]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right"></th>
<th align="right">letter</th>
<th align="right">digit</th>
</tr>
</thead>
<tbody><tr>
<td align="right"></td>
<td align="right">match</td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right">A</td>
<td align="right">0</td>
<td align="right">a</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">a</td>
<td align="right">2</td>
<td align="right"></td>
</tr>
<tr>
<td align="right">B</td>
<td align="right">0</td>
<td align="right">b</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">C</td>
<td align="right">0</td>
<td align="right">c</td>
<td align="right">1</td>
</tr>
</tbody></table>
<p>In [47]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s[<span class="string">'A'</span>]=<span class="string">'a1'</span></span><br><span class="line">s<span class="selector-class">.str</span><span class="selector-class">.extractall</span>(two_groups)</span><br></pre></td></tr></table></figure>

<p>Out[47]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right"></th>
<th align="right">letter</th>
<th align="right">digit</th>
</tr>
</thead>
<tbody><tr>
<td align="right"></td>
<td align="right">match</td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right">A</td>
<td align="right">0</td>
<td align="right">a</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">B</td>
<td align="right">0</td>
<td align="right">b</td>
<td align="right">1</td>
</tr>
<tr>
<td align="right">C</td>
<td align="right">0</td>
<td align="right">c</td>
<td align="right">1</td>
</tr>
</tbody></table>
<h4 id="如果想查看第i层匹配，可使用xs方法"><a href="#如果想查看第i层匹配，可使用xs方法" class="headerlink" title="如果想查看第i层匹配，可使用xs方法"></a>如果想查看第i层匹配，可使用xs方法</h4><p>In [48]:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">"a1a2"</span>, <span class="string">"b1b2"</span>, <span class="string">"c1c2"</span>], index=[<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>],<span class="attribute">dtype</span>=<span class="string">"string"</span>)</span><br><span class="line">s.str.extractall(two_groups).xs(1,<span class="attribute">level</span>=<span class="string">'match'</span>)</span><br></pre></td></tr></table></figure>

<p>Out[48]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">letter</th>
<th align="right">digit</th>
</tr>
</thead>
<tbody><tr>
<td align="right">A</td>
<td align="right">a</td>
<td align="right">2</td>
</tr>
<tr>
<td align="right">B</td>
<td align="right">b</td>
<td align="right">2</td>
</tr>
<tr>
<td align="right">C</td>
<td align="right">c</td>
<td align="right">2</td>
</tr>
</tbody></table>
<h3 id="3-str-contains和str-match"><a href="#3-str-contains和str-match" class="headerlink" title="3. str.contains和str.match"></a>3. str.contains和str.match</h3><h4 id="前者的作用为检测是否包含某种正则模式"><a href="#前者的作用为检测是否包含某种正则模式" class="headerlink" title="前者的作用为检测是否包含某种正则模式"></a>前者的作用为检测是否包含某种正则模式</h4><p>In [49]:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'1', None, '3a', '3b', '03c'</span>], dtype="string").str.contains(r'[<span class="string">0-9</span>][<span class="symbol">a-z</span>]')</span><br></pre></td></tr></table></figure>

<p>Out[49]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>     <span class="string">&lt;NA&gt;</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">4</span>     <span class="literal">True</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">boolean</span></span><br></pre></td></tr></table></figure>

<h4 id="可选参数为na"><a href="#可选参数为na" class="headerlink" title="可选参数为na"></a>可选参数为na</h4><p>In [50]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'1'</span>, None, <span class="string">'3a'</span>, <span class="string">'3b'</span>, <span class="string">'03c'</span>], dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.contains</span>(<span class="string">'a'</span>, na=False)</span><br></pre></td></tr></table></figure>

<p>Out[50]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">4</span>    <span class="literal">False</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">boolean</span></span><br></pre></td></tr></table></figure>

<h4 id="str-match与其区别在于，match依赖于python的re-match，检测内容为是否从头开始包含该正则模式"><a href="#str-match与其区别在于，match依赖于python的re-match，检测内容为是否从头开始包含该正则模式" class="headerlink" title="str.match与其区别在于，match依赖于python的re.match，检测内容为是否从头开始包含该正则模式"></a>str.match与其区别在于，match依赖于python的re.match，检测内容为是否从头开始包含该正则模式</h4><p>In [51]:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'1', None, '3a_', '3b', '03c'</span>], dtype="string").str.match(r'[<span class="string">0-9</span>][<span class="symbol">a-z</span>]',na=False)</span><br></pre></td></tr></table></figure>

<p>Out[51]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">4</span>    <span class="literal">False</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">boolean</span></span><br></pre></td></tr></table></figure>

<p>In [52]:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'1', None, '_3a', '3b', '03c'</span>], dtype="string").str.match(r'[<span class="string">0-9</span>][<span class="symbol">a-z</span>]',na=False)</span><br></pre></td></tr></table></figure>

<p>Out[52]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">3</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">4</span>    <span class="literal">False</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">boolean</span></span><br></pre></td></tr></table></figure>

<h2 id="五、常用字符串方法"><a href="#五、常用字符串方法" class="headerlink" title="五、常用字符串方法"></a>五、常用字符串方法</h2><h3 id="1-过滤型方法"><a href="#1-过滤型方法" class="headerlink" title="1. 过滤型方法"></a>1. 过滤型方法</h3><h4 id="（a）str-strip"><a href="#（a）str-strip" class="headerlink" title="（a）str.strip"></a>（a）str.strip</h4><h4 id="常用于过滤空格"><a href="#常用于过滤空格" class="headerlink" title="常用于过滤空格"></a>常用于过滤空格</h4><p>In [53]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(list(<span class="string">'abc'</span>),index=[<span class="string">' space1  '</span>,<span class="string">'space2  '</span>,<span class="string">'  space3'</span>],dtype=<span class="string">"string"</span>)<span class="selector-class">.index</span><span class="selector-class">.str</span><span class="selector-class">.strip</span>()</span><br></pre></td></tr></table></figure>

<p>Out[53]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Index</span><span class="params">([<span class="string">'space1'</span>, <span class="string">'space2'</span>, <span class="string">'space3'</span>], dtype=<span class="string">'object'</span>)</span></span></span><br></pre></td></tr></table></figure>

<h4 id="（b）str-lower和str-upper"><a href="#（b）str-lower和str-upper" class="headerlink" title="（b）str.lower和str.upper"></a>（b）str.lower和str.upper</h4><p>In [54]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(<span class="string">'A'</span>,dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.lower</span>()</span><br></pre></td></tr></table></figure>

<p>Out[54]:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="keyword">a</span></span><br><span class="line">dtype: <span class="keyword">string</span></span><br></pre></td></tr></table></figure>

<p>In [55]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(<span class="string">'a'</span>,dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.upper</span>()</span><br></pre></td></tr></table></figure>

<p>Out[55]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    A</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h4 id="（c）str-swapcase和str-capitalize"><a href="#（c）str-swapcase和str-capitalize" class="headerlink" title="（c）str.swapcase和str.capitalize"></a>（c）str.swapcase和str.capitalize</h4><h4 id="分别表示交换字母大小写和大写首字母"><a href="#分别表示交换字母大小写和大写首字母" class="headerlink" title="分别表示交换字母大小写和大写首字母"></a>分别表示交换字母大小写和大写首字母</h4><p>In [56]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(<span class="string">'abCD'</span>,dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.swapcase</span>()</span><br></pre></td></tr></table></figure>

<p>Out[56]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    ABcd</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<p>In [57]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series(<span class="string">'abCD'</span>,dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.capitalize</span>()</span><br></pre></td></tr></table></figure>

<p>Out[57]:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    Abcd</span><br><span class="line">dtype: <span class="built_in">string</span></span><br></pre></td></tr></table></figure>

<h3 id="2-isnumeric方法"><a href="#2-isnumeric方法" class="headerlink" title="2. isnumeric方法"></a>2. isnumeric方法</h3><h4 id="检查每一位是否都是数字，请问如何判断是否是数值？（问题二）"><a href="#检查每一位是否都是数字，请问如何判断是否是数值？（问题二）" class="headerlink" title="检查每一位是否都是数字，请问如何判断是否是数值？（问题二）"></a>检查每一位是否都是数字，请问如何判断是否是数值？（问题二）</h4><p>In [58]:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'1.2'</span>,<span class="string">'1'</span>,<span class="string">'-0.3'</span>,<span class="string">'a'</span>,np.nan],dtype=<span class="string">"string"</span>)<span class="selector-class">.str</span><span class="selector-class">.isnumeric</span>()</span><br></pre></td></tr></table></figure>

<p>Out[58]:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">2</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">3</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">4</span>     <span class="string">&lt;NA&gt;</span></span><br><span class="line"><span class="attr">dtype:</span> <span class="string">boolean</span></span><br></pre></td></tr></table></figure>

<h2 id="六、问题与练习"><a href="#六、问题与练习" class="headerlink" title="六、问题与练习"></a>六、问题与练习</h2><h3 id="1-问题"><a href="#1-问题" class="headerlink" title="1. 问题"></a>1. 问题</h3><h4 id="【问题一】-str对象方法和df-Series对象方法有什么区别？"><a href="#【问题一】-str对象方法和df-Series对象方法有什么区别？" class="headerlink" title="【问题一】 str对象方法和df/Series对象方法有什么区别？"></a>【问题一】 str对象方法和df/Series对象方法有什么区别？</h4><h4 id="【问题二】-给出一列string类型，如何判断单元格是否是数值型数据？"><a href="#【问题二】-给出一列string类型，如何判断单元格是否是数值型数据？" class="headerlink" title="【问题二】 给出一列string类型，如何判断单元格是否是数值型数据？"></a>【问题二】 给出一列string类型，如何判断单元格是否是数值型数据？</h4><h4 id="【问题三】-rsplit方法的作用是什么？它在什么场合下适用？"><a href="#【问题三】-rsplit方法的作用是什么？它在什么场合下适用？" class="headerlink" title="【问题三】 rsplit方法的作用是什么？它在什么场合下适用？"></a>【问题三】 rsplit方法的作用是什么？它在什么场合下适用？</h4><h4 id="【问题四】-在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？"><a href="#【问题四】-在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？" class="headerlink" title="【问题四】 在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？"></a>【问题四】 在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？</h4><h3 id="2-练习"><a href="#2-练习" class="headerlink" title="2. 练习"></a>2. 练习</h3><h4 id="【练习一】-现有一份关于字符串的数据集，请解决以下问题："><a href="#【练习一】-现有一份关于字符串的数据集，请解决以下问题：" class="headerlink" title="【练习一】 现有一份关于字符串的数据集，请解决以下问题："></a>【练习一】 现有一份关于字符串的数据集，请解决以下问题：</h4><h4 id="（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”"><a href="#（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”" class="headerlink" title="（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”"></a>（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”</h4><h4 id="（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。"><a href="#（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。" class="headerlink" title="（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。"></a>（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。</h4><h4 id="（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。"><a href="#（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。" class="headerlink" title="（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。"></a>（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。</h4><p>In [59]:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pd</span><span class="selector-class">.read_csv</span>(<span class="string">'data/String_data_one.csv'</span>,index_col=<span class="string">'人员编号'</span>)<span class="selector-class">.head</span>()</span><br></pre></td></tr></table></figure>

<p>Out[59]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">姓名</th>
<th align="right">国籍</th>
<th align="right">性别</th>
<th align="right">出生年</th>
<th align="right">出生月</th>
<th align="right">出生日</th>
</tr>
</thead>
<tbody><tr>
<td align="right">人员编号</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">aesfd</td>
<td align="right">2</td>
<td align="right">男</td>
<td align="right">1942</td>
<td align="right">8</td>
<td align="right">10</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">fasefa</td>
<td align="right">5</td>
<td align="right">女</td>
<td align="right">1985</td>
<td align="right">10</td>
<td align="right">4</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">aeagd</td>
<td align="right">4</td>
<td align="right">女</td>
<td align="right">1946</td>
<td align="right">10</td>
<td align="right">15</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">aef</td>
<td align="right">4</td>
<td align="right">男</td>
<td align="right">1999</td>
<td align="right">5</td>
<td align="right">13</td>
</tr>
<tr>
<td align="right">5</td>
<td align="right">eaf</td>
<td align="right">1</td>
<td align="right">女</td>
<td align="right">2010</td>
<td align="right">6</td>
<td align="right">24</td>
</tr>
</tbody></table>
<h4 id="【练习二】-现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题："><a href="#【练习二】-现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题：" class="headerlink" title="【练习二】 现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题："></a>【练习二】 现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题：</h4><h4 id="（a）选出所有关于北京市和上海市新闻标题的所在行。"><a href="#（a）选出所有关于北京市和上海市新闻标题的所在行。" class="headerlink" title="（a）选出所有关于北京市和上海市新闻标题的所在行。"></a>（a）选出所有关于北京市和上海市新闻标题的所在行。</h4><h4 id="（b）求col2的均值。"><a href="#（b）求col2的均值。" class="headerlink" title="（b）求col2的均值。"></a>（b）求col2的均值。</h4><h4 id="（c）求col3的均值。"><a href="#（c）求col3的均值。" class="headerlink" title="（c）求col3的均值。"></a>（c）求col3的均值。</h4><p>In [60]:</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">pd</span>.read_csv('<span class="class"><span class="keyword">data</span>/<span class="type">String_data_two</span>.csv').head()</span></span><br></pre></td></tr></table></figure>

<p>Out[60]:</p>
<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">col1</th>
<th align="right">col2</th>
<th align="right">col3</th>
</tr>
</thead>
<tbody><tr>
<td align="right">0</td>
<td align="right">鄂尔多斯市第2例确诊患者治愈出院</td>
<td align="right">19</td>
<td align="right">363.6923</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">云南新增2例，累计124例</td>
<td align="right">-67</td>
<td align="right">-152.281</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">武汉协和医院14名感染医护出院</td>
<td align="right">-86</td>
<td align="right">325.6221</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">山东新增9例，累计307例</td>
<td align="right">-74</td>
<td align="right">-204.9313</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">上海开学日期延至3月</td>
<td align="right">-95</td>
<td align="right">4.05</td>
</tr>
</tbody></table>
<p>This website does not host notebooks, it only renders notebooks available on other websites.</p>
<p>Delivered by <a href="https://www.fastly.com/" target="_blank" rel="noopener">Fastly</a>, Rendered by <a href="https://ovhcloud.com/" target="_blank" rel="noopener">OVHCloud</a></p>
<p>nbviewer GitHub <a href="https://github.com/jupyter/nbviewer">repository</a>.</p>
<p>nbviewer version: <a href="https://github.com/jupyter/nbviewer/commit/e83752b49e1663d3feb1c157d31fb51451f11c0a">e83752b</a></p>
<p>nbconvert version: <a href="https://github.com/jupyter/nbconvert/releases/tag/5.6.1">5.6.1</a></p>
<p>Rendered 2 minutes ago</p>

  </div>
</article>



    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <div id="vcomments" class="blog-post-comments"></div>
    <script>
        new Valine({
            el: '#vcomments',
            visitor: true,
            appId: 'q494NdCTA7S8AuwxLVHFxz41-MdYXbMMI',
            appKey: 'dV8G37HkOGPbWVkPzlAUndh7',
            placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
            avatar: 'robohash'
        })
    </script>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第7章-文本数据"><span class="toc-number">1.</span> <span class="toc-text">第7章 文本数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、string类型的性质"><span class="toc-number">1.1.</span> <span class="toc-text">一、string类型的性质</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-string与object的区别"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. string与object的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#string类型和object不同之处有三："><span class="toc-number">1.1.1.1.</span> <span class="toc-text">string类型和object不同之处有三：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#①-字符存取方法（string-accessor-methods，如str-count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">① 字符存取方法（string accessor methods，如str.count）会返回相应数据的Nullable类型，而object会随缺失值的存在而改变返回类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#②-某些Series方法不能在string上使用，例如：-Series-str-decode-，因为存储的是字符串而不是字节"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">② 某些Series方法不能在string上使用，例如： Series.str.decode()，因为存储的是字符串而不是字节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#③-string类型在缺失值存储或运算时，类型会广播为pd-NA，而不是浮点型np-nan"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">③ string类型在缺失值存储或运算时，类型会广播为pd.NA，而不是浮点型np.nan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">其余全部内容在当前版本下完全一致，但迎合Pandas的发展模式，我们仍然全部用string来操作字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-string类型的转换"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. string类型的转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#如果将一个其他类型的容器直接转换string类型可能会出错："><span class="toc-number">1.1.2.1.</span> <span class="toc-text">如果将一个其他类型的容器直接转换string类型可能会出错：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#当下正确的方法是分两部转换，先转为str型object，在转为string类型："><span class="toc-number">1.1.2.2.</span> <span class="toc-text">当下正确的方法是分两部转换，先转为str型object，在转为string类型：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、拆分与拼接"><span class="toc-number">1.2.</span> <span class="toc-text">二、拆分与拼接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-split方法"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. str.split方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）分割符与str的位置元素选取"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">（a）分割符与str的位置元素选取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#根据某一个元素分割，默认为空格"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">根据某一个元素分割，默认为空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">这里需要注意split后的类型是object，因为现在Series中的元素已经不是string，而包含了list，且string类型只能含有字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str-i-表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">对于str方法可以进行元素的选择，如果该单元格元素是列表，那么str[i]表示取出第i个元素，如果是单个元素，则先把元素转为列表在取出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）其他参数"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">（b）其他参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#expand参数控制了是否将列拆开，n参数代表最多分割多少次"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">expand参数控制了是否将列拆开，n参数代表最多分割多少次</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-str-cat方法"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. str.cat方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）不同对象的拼接模式"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">（a）不同对象的拼接模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">cat方法对于不同对象的作用结果并不相同，其中的对象包括：单列、双列、多列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#①-对于单个Series而言，就是指所有的元素进行字符合并为一个字符串"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">① 对于单个Series而言，就是指所有的元素进行字符合并为一个字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其中可选sep分隔符参数，和缺失值替代字符na-rep参数"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">其中可选sep分隔符参数，和缺失值替代字符na_rep参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#②-对于两个Series合并而言，是对应索引的元素进行合并"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">② 对于两个Series合并而言，是对应索引的元素进行合并</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#同样也有相应参数，需要注意的是两个缺失值会被同时替换"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">同样也有相应参数，需要注意的是两个缺失值会被同时替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#③-多列拼接可以分为表的拼接和多Series拼接"><span class="toc-number">1.2.2.7.</span> <span class="toc-text">③ 多列拼接可以分为表的拼接和多Series拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表的拼接"><span class="toc-number">1.2.2.8.</span> <span class="toc-text">表的拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多个Series拼接"><span class="toc-number">1.2.2.9.</span> <span class="toc-text">多个Series拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）cat中的索引对齐"><span class="toc-number">1.2.2.10.</span> <span class="toc-text">（b）cat中的索引对齐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join-’left’"><span class="toc-number">1.2.2.11.</span> <span class="toc-text">当前版本中，如果两边合并的索引不相同且未指定join参数，默认为左连接，设置join=’left’</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、替换"><span class="toc-number">1.3.</span> <span class="toc-text">三、替换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#广义上的替换，就是指str-replace函数的应用，fillna是针对缺失值的替换，上一章已经提及"><span class="toc-number">1.3.0.1.</span> <span class="toc-text">广义上的替换，就是指str.replace函数的应用，fillna是针对缺失值的替换，上一章已经提及</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉"><span class="toc-number">1.3.0.2.</span> <span class="toc-text">提到替换，就不可避免地接触到正则表达式，这里默认读者已掌握常见正则表达式知识点，若对其还不了解的，可以通过这份资料来熟悉</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-replace的常见用法"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. str.replace的常见用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一个值写r开头的正则表达式，后一个写替换的字符串"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">第一个值写r开头的正则表达式，后一个写替换的字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-子组与函数替换"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 子组与函数替换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过正整数调用子组（0返回字符本身，从1开始才是子组）"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">通过正整数调用子组（0返回字符本身，从1开始才是子组）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#利用-P-lt-…-gt-表达式可以对子组命名调用"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">利用?P&lt;….&gt;表达式可以对子组命名调用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-关于str-replace的注意事项"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 关于str.replace的注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#首先，要明确str-replace和replace并不是一个东西："><span class="toc-number">1.3.3.1.</span> <span class="toc-text">首先，要明确str.replace和replace并不是一个东西：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">str.replace针对的是object类型或string类型，默认是以正则表达式为操作，目前暂时不支持DataFrame上使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex-True，该方法通过字典可支持多列替换"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">replace针对的是任意类型的序列或数据框，如果要以正则表达式替换，需要设置regex=True，该方法通过字典可支持多列替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复"><span class="toc-number">1.3.3.4.</span> <span class="toc-text">但现在由于string类型的初步引入，用法上出现了一些问题，这些issue有望在以后的版本中修复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）str-replace赋值参数不得为pd-NA"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">（a）str.replace赋值参数不得为pd.NA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错"><span class="toc-number">1.3.3.6.</span> <span class="toc-text">这听上去非常不合理，例如对满足某些正则条件的字符串替换为缺失值，直接更改为缺失值在当下版本就会报错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#此时，可以先转为object类型再转换回来，曲线救国："><span class="toc-number">1.3.3.7.</span> <span class="toc-text">此时，可以先转为object类型再转换回来，曲线救国：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条"><span class="toc-number">1.3.3.8.</span> <span class="toc-text">至于为什么不用replace函数的regex替换（但string类型replace的非正则替换是可以的），原因在下面一条</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换"><span class="toc-number">1.3.3.9.</span> <span class="toc-text">（b）对于string类型Series，在使用replace函数时不能使用正则表达式替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#该bug现在还未修复"><span class="toc-number">1.3.3.10.</span> <span class="toc-text">该bug现在还未修复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）string类型序列如果存在缺失值，不能使用replace替换"><span class="toc-number">1.3.3.11.</span> <span class="toc-text">（c）string类型序列如果存在缺失值，不能使用replace替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str-replace方法"><span class="toc-number">1.3.3.12.</span> <span class="toc-text">综上，概况的说，除非需要赋值元素为缺失值（转为object再转回来），否则请使用str.replace方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、子串匹配与提取"><span class="toc-number">1.4.</span> <span class="toc-text">四、子串匹配与提取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-str-extract方法"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. str.extract方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）常见用法"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">（a）常见用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用子组名作为列名"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">使用子组名作为列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#利用-正则标记选择部分提取"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">利用?正则标记选择部分提取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）expand参数（默认为True）"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">（b）expand参数（默认为True）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame"><span class="toc-number">1.4.1.5.</span> <span class="toc-text">对于一个子组的Series，如果expand设置为False，则返回Series，若大于一个子组，则expand参数无效，全部返回DataFrame</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错"><span class="toc-number">1.4.1.6.</span> <span class="toc-text">对于一个子组的Index，如果expand设置为False，则返回提取后的Index，若大于一个子组且expand为False，报错</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-str-extractall方法"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. str.extractall方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">与extract只匹配第一个符合条件的表达式不同，extractall会找出所有符合条件的字符串，并建立多级索引（即使只找到一个）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如果想查看第i层匹配，可使用xs方法"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">如果想查看第i层匹配，可使用xs方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-str-contains和str-match"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. str.contains和str.match</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#前者的作用为检测是否包含某种正则模式"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">前者的作用为检测是否包含某种正则模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可选参数为na"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">可选参数为na</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-match与其区别在于，match依赖于python的re-match，检测内容为是否从头开始包含该正则模式"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">str.match与其区别在于，match依赖于python的re.match，检测内容为是否从头开始包含该正则模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、常用字符串方法"><span class="toc-number">1.5.</span> <span class="toc-text">五、常用字符串方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-过滤型方法"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 过滤型方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）str-strip"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">（a）str.strip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用于过滤空格"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">常用于过滤空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）str-lower和str-upper"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">（b）str.lower和str.upper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）str-swapcase和str-capitalize"><span class="toc-number">1.5.1.4.</span> <span class="toc-text">（c）str.swapcase和str.capitalize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分别表示交换字母大小写和大写首字母"><span class="toc-number">1.5.1.5.</span> <span class="toc-text">分别表示交换字母大小写和大写首字母</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-isnumeric方法"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. isnumeric方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#检查每一位是否都是数字，请问如何判断是否是数值？（问题二）"><span class="toc-number">1.5.2.1.</span> <span class="toc-text">检查每一位是否都是数字，请问如何判断是否是数值？（问题二）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、问题与练习"><span class="toc-number">1.6.</span> <span class="toc-text">六、问题与练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-问题"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题一】-str对象方法和df-Series对象方法有什么区别？"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">【问题一】 str对象方法和df/Series对象方法有什么区别？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题二】-给出一列string类型，如何判断单元格是否是数值型数据？"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">【问题二】 给出一列string类型，如何判断单元格是否是数值型数据？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题三】-rsplit方法的作用是什么？它在什么场合下适用？"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">【问题三】 rsplit方法的作用是什么？它在什么场合下适用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【问题四】-在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">【问题四】 在本章的第二到第四节分别介绍了字符串类型的5类操作，请思考它们各自应用于什么场景？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-练习"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 练习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#【练习一】-现有一份关于字符串的数据集，请解决以下问题："><span class="toc-number">1.6.2.1.</span> <span class="toc-text">【练习一】 现有一份关于字符串的数据集，请解决以下问题：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">（a）现对字符串编码存储人员信息（在编号后添加ID列），使用如下格式：“×××（名字）：×国人，性别×，生于×年×月×日”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">（b）将（a）中的人员生日信息部分修改为用中文表示（如一九七四年十月二十三日），其余返回格式不变。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">（c）将（b）中的ID列结果拆分为原列表相应的5列，并使用equals检验是否一致。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#【练习二】-现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题："><span class="toc-number">1.6.2.5.</span> <span class="toc-text">【练习二】 现有一份半虚拟的数据集，第一列包含了新型冠状病毒的一些新闻标题，请解决以下问题：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（a）选出所有关于北京市和上海市新闻标题的所在行。"><span class="toc-number">1.6.2.6.</span> <span class="toc-text">（a）选出所有关于北京市和上海市新闻标题的所在行。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（b）求col2的均值。"><span class="toc-number">1.6.2.7.</span> <span class="toc-text">（b）求col2的均值。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（c）求col3的均值。"><span class="toc-number">1.6.2.8.</span> <span class="toc-text">（c）求col3的均值。</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&text=07_文本数据"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&is_video=false&description=07_文本数据"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=07_文本数据&body=Check out this article: https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&title=07_文本数据"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://github.com/gaojianjie412/gaojianjie412.github.io/2020/06/27/07-文本数据/&name=07_文本数据&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 Robby
    <a href="http://www.beian.miit.gov.cn/">豫ICP备19040301号</a> 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">Tag</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
        
    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-148159204-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?dbb105d46eafbe9b2400ee1886ae06d2";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

<!-- Disqus Comments -->


</body>
</html>
